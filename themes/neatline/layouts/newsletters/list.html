{{ define "main" }}

<!-- newsletters -->
<section class="section">
  <div class="container">
    <div class="row">
      <!-- newsletter -->
      {{ $prev := 3000}}
      {{ $newsletters := where site.RegularPages.ByDate.Reverse "Type" "newsletters" }}

      {{ $paginator := .Paginate $newsletters }}
      {{ range $paginator.Pages }}
        {{if .Params.newsletter_publication_date}}
        {{if gt $prev (dateFormat "2006" .Params.newsletter_publication_date)}}
        {{ if ne $prev 3000}}
        {{ end }}
        <h2>{{ dateFormat "2006" .Params.newsletter_publication_date }}</h2>
        
        {{end}}
        {{ $prev = dateFormat "2006" .Params.newsletter_publication_date}}
        <div class="col-lg-4 col-sm-6 mb-4">
          <div class="card border-0 rounded-0 hover-shadow">
            <div class="card-img position-relative">
              <a href="{{ .Permalink }}"><img class="card-img-top rounded-0" height="150vh" src="{{ .Params.banner_iiif_image | relURL }}" alt="{{ .Params.subject_line }}"></a>
              <div class="card-date"><span>{{ dateFormat "2" .Params.newsletter_publication_date }}</span><br>{{ dateFormat "Jan" .Params.newsletter_publication_date }}<br>{{ dateFormat "2006" .Params.newsletter_publication_date }}</div>
            </div>
            <div class="card-body">
              <h6>{{ dateFormat "January 2, 2006" .Params.newsletter_publication_date  }}</h6>
              <h4 class="card-title"><a href="{{ .Permalink }}">{{ .Params.subject_line }}</a></h4>
              
            </div>
          </div>
        </div>
        {{end}}
        {{end}}   
    </div>
  </div>
</section>
<!-- /newsletters -->

{{ end }}