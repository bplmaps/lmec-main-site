<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<a id="popup" href="{{ .Get `src`}}" class="popupTooltip" target="blank">
  &#128269; {{.Inner}}</a>

<script>
  this.iiifPreview = function() {
    xOffset = 500;
    yOffset = -180;
    $("a.popupTooltip").hover(function(e) {
        $("<div id='iiif-popup' style='position:absolute; background:#333; padding:5px; color:#fff; max-height:500px; max-width:500px; display:none;'><img style='border:none; max-width:500px; max-height:500px;' src='" + this.href +
          "' alt='url preview' />" + "</div>").appendTo($(this).parent());
        $("#iiif-popup")
          .css("top", (e.pageY - xOffset) + "px")
          .css("left", (e.pageX + yOffset) + "px")
          .fadeIn("fast");
      },
      function() {
        $("#iiif-popup").remove();
      });
    $("a.popupTooltip").mousemove(function(e) {
      $("#iiif-popup")
        .css("top", (e.pageY - xOffset) + "px")
        .css("left", (e.pageX + yOffset) + "px");
    });
  };
  $(document).ready(function() {
    iiifPreview();
  });
</script>
